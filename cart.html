<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Shopping Cart</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body { display: flex; flex-direction: column; }
    .cart-container { flex: 1; max-width: 1200px; margin: 0 auto; padding: 20px 16px; width: 100%; }
    .cart-header { margin-bottom: 24px; }
    .cart-header h2 { margin: 0; font-size: 24px; color: #fff; }
    .cart-main { display: flex; gap: 20px; }
    .cart-items { flex: 1; }
    .cart-item { background: #fff; border: 1px solid #eee; padding: 16px; margin-bottom: 12px; border-radius: 6px; display: flex; gap: 16px; }
    .item-img { width: 100px; height: 100px; background: #f4f4f4; border-radius: 4px; flex-shrink: 0; }
    .item-details { flex: 1; display: flex; flex-direction: column; }
    .item-title { font-weight: 600; margin: 0; color: #000; }
    .item-price { color: var(--accent); font-weight: 700; font-size: 18px; margin: 4px 0; }
    .item-qty { display: flex; gap: 8px; align-items: center; margin-top: auto; }
    .qty-input { width: 60px; padding: 6px; border: 1px solid #ddd; border-radius: 4px; }
    .remove-btn { color: #d32f2f; text-decoration: none; font-size: 14px; cursor: pointer; }
    .summary-box { width: 300px; background: #f9f9f9; padding: 16px; border-radius: 6px; border: 1px solid #eee; height: fit-content; }
    .summary-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; color: #000; }
    .summary-total { display: flex; justify-content: space-between; font-weight: 700; font-size: 18px; margin-top: 12px; padding-top: 12px; border-top: 2px solid #ddd; color: #000; }
    .btn-proceed { display: block; width: 100%; background: var(--accent); color: #fff; padding: 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 12px; text-align: center; text-decoration: none; }
    .btn-continue { display: inline-block; color: var(--accent); text-decoration: none; margin-top: 12px; }
    .empty-cart { text-align: center; padding: 40px 20px; color: #fff; }
    .empty-cart p { color: #ccc; margin-bottom: 20px; }
    @media (max-width: 768px) {
      .cart-main { flex-direction: column; }
      .summary-box { width: 100%; }
      .cart-item { flex-direction: column; }
      .item-img { width: 100%; height: 150px; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo-area"><a href="index.html"><img src="assets/logo.jpg" alt="Logo" class="logo"></a></div>
      <div class="search-area">
        <form class="search-form" action="#" method="get">
            <select class="cat-select">
              <option value="all">All</option>
              <option value="electronics">Electronics</option>
              <option value="fashion">Fashion</option>
              <option value="cosmetics">Cosmetics</option>
            </select>
          <input class="search-input" type="text" placeholder="Search for products, brands and more" />
          <button class="search-btn" type="submit">Search</button>
        </form>
      </div>
      <div class="actions-area">
        <a href="cart.html" class="action">Cart</a>
      </div>
    </div>
  </header>

  <div class="cart-container">
    <div class="cart-header">
      <h2>Shopping Cart</h2>
    </div>

    <div id="cart-content">
      <div class="empty-cart">
        <p>Your cart is empty.</p>
        <a href="index.html" class="btn-continue">← Continue Shopping</a>
      </div>
    </div>

    <div class="cart-main" id="cart-main" style="display:none">
      <div class="cart-items" id="cart-items"></div>
      <div class="summary-box">
        <div class="summary-row">
          <span>Subtotal:</span>
          <span id="subtotal">Rs. 0</span>
        </div>
        <div class="summary-row">
          <span>Shipping:</span>
          <span>Rs. 0</span>
        </div>
        <div class="summary-row">
          <span>Tax:</span>
          <span>Rs. 0</span>
        </div>
        <div class="summary-total">
          <span>Total:</span>
          <span id="total">Rs. 0</span>
        </div>
        <a href="checkout.html" class="btn-proceed">Proceed to Checkout</a>
        <a href="index.html" class="btn-continue">← Continue Shopping</a>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-section">
        <img src="assets/logo.jpg" alt="Logo" class="footer-logo">
        <p>Founded with a simple mission—to bring the best products at the best prices right to your doorstep—we work every day to create a smooth, secure, and enjoyable shopping experience.</p>
      </div>
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="service.html">Services</a></li>
          <li><a href="aboutus.html">About Us</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    const productTitle = urlParams.get('title');
    const productPrice = urlParams.get('price');
    const productImg = urlParams.get('img');

    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function addToCart() {
      if (!productId || !productTitle || !productPrice) return;

      const existing = cart.find(item => item.id === productId);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ id: productId, title: productTitle, price: parseInt(productPrice), qty: 1, img: productImg || '' });
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    function renderCart() {
      if (cart.length === 0) {
        document.getElementById('cart-content').style.display = 'block';
        document.getElementById('cart-main').style.display = 'none';
        return;
      }

      document.getElementById('cart-content').style.display = 'none';
      document.getElementById('cart-main').style.display = 'flex';

      let cartHTML = '';
      let subtotal = 0;

      cart.forEach(item => {
        const itemTotal = item.price * item.qty;
        subtotal += itemTotal;
        const thumb = item.img ? `<img src="${item.img}" alt="${item.title}">` : '';
        cartHTML += `
          <div class="cart-item">
            <div class="item-img">${thumb}</div>
            <div class="item-details">
              <h4 class="item-title">${item.title}</h4>
              <div class="item-price">Rs. ${item.price.toLocaleString()}</div>
              <div class="item-qty">
                <label>Qty: <input type="number" min="1" class="qty-input" value="${item.qty}" onchange="updateQty('${item.id}', this.value)"></label>
                <span style="margin-left:auto"><a class="remove-btn" onclick="removeItem('${item.id}')">Remove</a></span>
              </div>
            </div>
          </div>
        `;
      });

      document.getElementById('cart-items').innerHTML = cartHTML;
      document.getElementById('subtotal').textContent = 'Rs. ' + subtotal.toLocaleString();
      document.getElementById('total').textContent = 'Rs. ' + subtotal.toLocaleString();
    }

    function updateQty(id, qty) {
      const item = cart.find(i => i.id === id);
      if (item) {
        item.qty = parseInt(qty) || 1;
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      }
    }

    function removeItem(id) {
      cart = cart.filter(i => i.id !== id);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    if (productId && productTitle && productPrice) {
      addToCart();
    } else {
      renderCart();
    }
  </script>
</body>
</html>
